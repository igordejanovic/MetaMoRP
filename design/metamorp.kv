#:kivy 1.0
#:import Window kivy.core.window.Window
#:import Diagram metamorp.ui.diagram.Diagram
#:import DiagramWidget metamorp.ui.diagram.DiagramWidget
#:import get_random_color kivy.utils.get_random_color

Root:	
  FloatLayout:
    canvas:
      Color:
        rgba: self.parent.background_color
      Rectangle:
        pos: 0, 0
        size: Window.size

    Diagram:
      id: diagram
      DiagramWidget:

    BoxLayout:
      orientation: 'horizontal'
      size: (300,50)
      Button:
        text: "Color"
        on_press: root.background_color = get_random_color()

      ToggleButton:
        id: state_button
        background_normal: "images/hand.png"
        background_down: "images/lasso.png"
        size_hint: None, None
        size: (64,64)
        on_press: diagram.state="normal" if self.state == "normal" else "lasso"
        
      Button:
        text: "Best fit"
        on_press: root.best_fit()
      Button:
        text: "Cut"
        on_press: root.cut()
      Button:
        text: "Copy"
        on_press: root.copy()
      Button:
        text: "Paste"
        on_press: root.paste()
